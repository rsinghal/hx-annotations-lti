{% load staticfiles %}
<script src="{% static "vendors/mirador/mirador.js" %}"></script>
<link rel="stylesheet" href="{% static "vendors/mirador/css/mirador-combined.css" %}">
<style type="text/css">
    body { padding: 0; margin: 0; overflow: hidden; font-size: 70%; }
    #viewer { background: #333 url(../../../static/vendors/mirador/images/debut_dark.png) left top repeat; width: 100%; height: 100%; position: fixed; }
  </style>
<div id="viewer"></div>

<script>
$(function() {
      Mirador({
        "id": "viewer",
        "currentWorkspaceType": "singleObject",
        "mainMenuSettings" : {
           'show' : false
        },
        "layout" : "1x1",
        "saveSession" : false,
        "data": [
        {% for i in objects %}
        { "manifestUri": "{{ i }}", "location": "Harvard University"},
        {% endfor %}
        ],
        "windowObjects": [
          {
            "loadedManifest": "{{ objects.0 }}",
        	"viewType" : "ImageView", 
                "annotationLayer" : true,
        	"sidePanel" : false,
                "layoutOptions" : 
             {
             "newObject" : true,
             "close" : false,
             "slotRight" : false,
             "slotLeft" : false,
             "slotAbove" : false,
             "slotBelow" : false
             }
          },
        ],
        "annotationEndpoint": 
          {
          "name":"Harvard CATCH Dev",
          "module": "CatchEndpoint",
          "options": {
            token: "{{ token }}",
            // The endpoint of the store on your server.
            prefix: "https://catch-dev.harvardx.harvard.edu/catch/annotator",
            userid : "{{ user_id }}",
            username : "{{ username }}",
            roles : "{{ roles }}",
            collection_id : "{{ collection }}",
            context_id : "{{ course }}",
          }
        }
      });
    });
</script>
